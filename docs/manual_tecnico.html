<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manual T√©cnico - Sistema Qtrazer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f8f9fa;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }

        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 2rem;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .nav {
            background: #34495e;
            padding: 1rem 2rem;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav ul {
            list-style: none;
            display: flex;
            gap: 2rem;
            flex-wrap: wrap;
        }

        .nav a {
            color: white;
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            transition: background-color 0.3s;
        }

        .nav a:hover {
            background-color: #2c3e50;
        }

        .content {
            padding: 2rem;
        }

        .section {
            margin-bottom: 3rem;
            padding: 2rem;
            border-left: 4px solid #2c3e50;
            background: #f8f9fa;
            border-radius: 0 10px 10px 0;
        }

        .section h2 {
            color: #2c3e50;
            margin-bottom: 1rem;
            font-size: 1.8rem;
        }

        .section h3 {
            color: #34495e;
            margin: 1.5rem 0 1rem 0;
            font-size: 1.4rem;
        }

        .section h4 {
            color: #2c3e50;
            margin: 1rem 0 0.5rem 0;
            font-size: 1.2rem;
        }

        .section p {
            margin-bottom: 1rem;
            text-align: justify;
        }

        .section ul, .section ol {
            margin: 1rem 0 1rem 2rem;
        }

        .section li {
            margin-bottom: 0.5rem;
        }

        .highlight {
            background: #e8f4fd;
            padding: 1rem;
            border-radius: 5px;
            border-left: 4px solid #3498db;
            margin: 1rem 0;
        }

        .warning {
            background: #fff3cd;
            padding: 1rem;
            border-radius: 5px;
            border-left: 4px solid #ffc107;
            margin: 1rem 0;
        }

        .error {
            background: #f8d7da;
            padding: 1rem;
            border-radius: 5px;
            border-left: 4px solid #dc3545;
            margin: 1rem 0;
        }

        .success {
            background: #d4edda;
            padding: 1rem;
            border-radius: 5px;
            border-left: 4px solid #28a745;
            margin: 1rem 0;
        }

        .code-block {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 1rem;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            margin: 1rem 0;
            border-left: 4px solid #3498db;
            overflow-x: auto;
        }

        .button-example {
            display: inline-block;
            background: #3498db;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            margin: 0.5rem;
            text-decoration: none;
            font-weight: 500;
        }

        .button-example:hover {
            background: #2980b9;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin: 1.5rem 0;
        }

        .feature-card {
            background: white;
            padding: 1.5rem;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-top: 4px solid #3498db;
        }

        .feature-card h4 {
            color: #3498db;
            margin-bottom: 1rem;
        }

        .footer {
            background: #34495e;
            color: white;
            text-align: center;
            padding: 2rem;
            margin-top: 3rem;
        }

        .toc {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 10px;
            margin-bottom: 2rem;
        }

        .toc h3 {
            color: #2c3e50;
            margin-bottom: 1rem;
        }

        .toc ul {
            list-style: none;
        }

        .toc li {
            margin-bottom: 0.5rem;
        }

        .toc a {
            color: #34495e;
            text-decoration: none;
            padding: 0.25rem 0;
            display: block;
            transition: color 0.3s;
        }

        .toc a:hover {
            color: #3498db;
        }

        .architecture-diagram {
            background: #ecf0f1;
            padding: 1.5rem;
            border-radius: 10px;
            margin: 1.5rem 0;
            text-align: center;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
        }

        .table-container {
            overflow-x: auto;
            margin: 1rem 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        th, td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid #dee2e6;
        }

        th {
            background: #2c3e50;
            color: white;
            font-weight: 600;
        }

        tr:nth-child(even) {
            background: #f8f9fa;
        }

        tr:hover {
            background: #e8f4fd;
        }

        @media (max-width: 768px) {
            .nav ul {
                flex-direction: column;
                gap: 1rem;
            }
            
            .content {
                padding: 1rem;
            }
            
            .section {
                padding: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üîß Sistema Qtrazer</h1>
            <p>Manual T√©cnico - Documentaci√≥n para Desarrolladores</p>
        </div>

        <nav class="nav">
            <ul>
                <li><a href="#introduccion">Introducci√≥n</a></li>
                <li><a href="#arquitectura">Arquitectura</a></li>
                <li><a href="#usuarios">Usuarios</a></li>
                <li><a href="#requisitos">Requisitos</a></li>
                <li><a href="#instalacion">Instalaci√≥n</a></li>
                <li><a href="#desarrollo">Desarrollo</a></li>
                <li><a href="#problemas">Soluci√≥n</a></li>
            </ul>
        </nav>

        <div class="content">
            <div class="toc">
                <h3>üìã √çndice del Manual T√©cnico</h3>
                <ul>
                    <li><a href="#introduccion">1. Introducci√≥n</a></li>
                    <li><a href="#arquitectura">2. Arquitectura del Sistema</a></li>
                    <li><a href="#usuarios">3. Caracter√≠sticas de Usuarios</a></li>
                    <li><a href="#requisitos">4. Requisitos de Hardware y Software</a></li>
                    <li><a href="#instalacion">5. Instalaci√≥n y Configuraci√≥n</a></li>
                    <li><a href="#desarrollo">6. Entorno de Desarrollo</a></li>
                    <li><a href="#problemas">7. Soluci√≥n de Problemas</a></li>
                </ul>
            </div>

            <div id="introduccion" class="section">
                <h2>üéØ Introducci√≥n</h2>
                <p><strong>Qtrazer</strong> es un sistema especializado para consultar datos de siniestros viales en Bogot√°, desarrollado para proporcionar acceso a informaci√≥n oficial sobre accidentes de tr√°nsito en la ciudad.</p>
                
                <div class="feature-grid">
                    <div class="feature-card">
                        <h4>üèóÔ∏è Arquitectura MVC</h4>
                        <p>Sistema modular con separaci√≥n clara de responsabilidades entre vistas, controladores y modelos.</p>
                    </div>
                    <div class="feature-card">
                        <h4>üóÑÔ∏è PostgreSQL</h4>
                        <p>Base de datos robusta y escalable con gesti√≥n avanzada de usuarios y permisos granulares.</p>
                    </div>
                    <div class="feature-card">
                        <h4>üîÑ APIs Externas</h4>
                        <p>Integraci√≥n con servicios oficiales de la Secretar√≠a de Movilidad para datos actualizados.</p>
                    </div>
                    <div class="feature-card">
                        <h4>üîß Entorno de Desarrollo</h4>
                        <p>Configuraci√≥n optimizada para Visual Studio Code con herramientas de desarrollo integradas.</p>
                    </div>
                </div>
            </div>

            <div id="arquitectura" class="section">
                <h2>üèóÔ∏è Arquitectura del Sistema</h2>
                
                <h3>Patr√≥n MVC (Modelo-Vista-Controlador)</h3>
                <p>El sistema sigue una arquitectura de <strong>Modelo-Vista-Controlador</strong> con las siguientes caracter√≠sticas:</p>
                
                <div class="architecture-diagram">
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê<br>
                    ‚îÇ     VISTAS      ‚îÇ    ‚îÇ   CONTROLADORES ‚îÇ    ‚îÇ     MODELOS     ‚îÇ<br>
                    ‚îÇ                 ‚îÇ    ‚îÇ                 ‚îÇ    ‚îÇ                 ‚îÇ<br>
                    ‚îÇ ‚Ä¢ main_view     ‚îÇ‚óÑ‚îÄ‚îÄ‚ñ∫‚îÇ ‚Ä¢ main_controller‚îÇ‚óÑ‚îÄ‚îÄ‚ñ∫‚îÇ ‚Ä¢ database      ‚îÇ<br>
                    ‚îÇ ‚Ä¢ query_view    ‚îÇ    ‚îÇ ‚Ä¢ update_controller‚îÇ   ‚îÇ ‚Ä¢ update_model ‚îÇ<br>
                    ‚îÇ ‚Ä¢ update_view   ‚îÇ    ‚îÇ                 ‚îÇ    ‚îÇ ‚Ä¢ api_client    ‚îÇ<br>
                    ‚îÇ ‚Ä¢ splash_view   ‚îÇ    ‚îÇ                 ‚îÇ    ‚îÇ                 ‚îÇ<br>
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò<br>
                                    ‚îÇ                       ‚îÇ<br>
                                    ‚ñº                       ‚ñº<br>
                           ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê<br>
                           ‚îÇ   CONFIGURACI√ìN ‚îÇ    ‚îÇ  BASE DE DATOS  ‚îÇ<br>
                           ‚îÇ                 ‚îÇ    ‚îÇ                 ‚îÇ<br>
                           ‚îÇ ‚Ä¢ settings.py   ‚îÇ    ‚îÇ ‚Ä¢ PostgreSQL    ‚îÇ<br>
                           ‚îÇ                 ‚îÇ    ‚îÇ ‚Ä¢ Servidor      ‚îÇ<br>
                           ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ ‚Ä¢ APIs Externas ‚îÇ<br>
                                                  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                </div>

                <h3>Componentes Principales</h3>
                
                <h4>M√≥dulo de Vistas (`src/views/`)</h4>
                <ul>
                    <li><strong>`main_view.py`</strong>: Interfaz principal del sistema</li>
                    <li><strong>`query_view.py`</strong>: Interfaz para consulta de siniestros</li>
                    <li><strong>`update_view.py`</strong>: Interfaz para actualizaci√≥n de base de datos</li>
                    <li><strong>`splash_view.py`</strong>: Pantalla de inicio del sistema</li>
                </ul>

                <h4>M√≥dulo de Controladores (`src/controllers/`)</h4>
                <ul>
                    <li><strong>`main_controller.py`</strong>: L√≥gica de control principal</li>
                    <li><strong>`update_controller.py`</strong>: Control de actualizaciones de datos</li>
                </ul>

                <h4>M√≥dulo de Modelos (`src/models/`)</h4>
                <ul>
                    <li><strong>`database.py`</strong>: Gesti√≥n de conexiones y consultas a PostgreSQL</li>
                    <li><strong>`update_model.py`</strong>: L√≥gica de actualizaci√≥n y sincronizaci√≥n</li>
                    <li><strong>`api_client.py`</strong>: Cliente para APIs externas</li>
                </ul>

                <h4>M√≥dulo de Configuraci√≥n (`src/config/`)</h4>
                <ul>
                    <li><strong>`settings.py`</strong>: Par√°metros de configuraci√≥n del sistema</li>
                </ul>
            </div>

            <div id="usuarios" class="section">
                <h2>üë• Caracter√≠sticas de los Usuarios del Sistema</h2>
                
                <h3>Tipos de Usuarios</h3>
                
                <h4>Usuario Final (Analyst)</h4>
                <div class="highlight">
                    <strong>Rol:</strong> Consulta y an√°lisis de datos<br>
                    <strong>Permisos:</strong> Lectura, inserci√≥n, actualizaci√≥n y eliminaci√≥n de datos<br>
                    <strong>Acceso:</strong> Remoto a trav√©s de la aplicaci√≥n cliente<br>
                    <strong>Responsabilidades:</strong> Mantener datos actualizados, generar reportes
                </div>

                <h4>Desarrollador</h4>
                <div class="highlight">
                    <strong>Rol:</strong> Desarrollo y mantenimiento del sistema<br>
                    <strong>Permisos:</strong> Acceso completo al c√≥digo fuente y base de datos<br>
                    <strong>Acceso:</strong> Local y remoto<br>
                    <strong>Responsabilidades:</strong> Implementar nuevas funcionalidades, corregir errores
                </div>

                <h4>Administrador del Sistema</h4>
                <div class="highlight">
                    <strong>Rol:</strong> Gesti√≥n de infraestructura y seguridad<br>
                    <strong>Permisos:</strong> Administraci√≥n completa del servidor y base de datos<br>
                    <strong>Acceso:</strong> Local al servidor<br>
                    <strong>Responsabilidades:</strong> Mantenimiento, copias de seguridad, seguridad
                </div>

                <h3>Configuraci√≥n de Usuarios en PostgreSQL</h3>
                
                <h4>Usuario Analyst</h4>
                <div class="code-block">
-- Usuario con permisos para operaciones CRUD<br>
CREATE USER "Analyst" WITH PASSWORD 'Julio2019**';<br>
GRANT CONNECT ON DATABASE Siniestros TO Analyst;<br>
GRANT USAGE ON SCHEMA public TO Analyst;<br>
GRANT SELECT, INSERT, UPDATE, DELETE ON ALL TABLES IN SCHEMA public TO Analyst;<br>
GRANT USAGE, SELECT ON ALL SEQUENCES IN SCHEMA public TO Analyst;
                </div>

                <h4>Usuario Desarrollador</h4>
                <div class="code-block">
-- Usuario con permisos de desarrollo<br>
CREATE USER "Developer" WITH PASSWORD 'DevPassword123';<br>
GRANT ALL PRIVILEGES ON DATABASE "Siniestros" TO Developer;<br>
GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO Developer;<br>
GRANT ALL PRIVILEGES ON ALL SEQUENCES IN SCHEMA public TO Developer;
                </div>
            </div>

            <div id="requisitos" class="section">
                <h2>üíª Requisitos de Hardware y Software</h2>
                
                <h3>Requisitos del Servidor</h3>
                
                <h4>Hardware M√≠nimo</h4>
                <ul>
                    <li><strong>Procesador:</strong> Intel Core i5 o AMD equivalente (4 n√∫cleos)</li>
                    <li><strong>Memoria RAM:</strong> 8 GB m√≠nimo, 16 GB recomendado</li>
                    <li><strong>Almacenamiento:</strong> 100 GB SSD m√≠nimo, 500 GB recomendado</li>
                    <li><strong>Red:</strong> Conexi√≥n de 100 Mbps m√≠nimo, 1 Gbps recomendado</li>
                </ul>

                <h4>Hardware Recomendado</h4>
                <ul>
                    <li><strong>Procesador:</strong> Intel Core i7 o AMD Ryzen 7 (8 n√∫cleos)</li>
                    <li><strong>Memoria RAM:</strong> 32 GB</li>
                    <li><strong>Almacenamiento:</strong> 1 TB NVMe SSD</li>
                    <li><strong>Red:</strong> Conexi√≥n de 1 Gbps con redundancia</li>
                </ul>

                <h3>Requisitos del Cliente</h3>
                
                <h4>Hardware M√≠nimo</h4>
                <ul>
                    <li><strong>Procesador:</strong> Intel Core i3 o AMD equivalente (2 n√∫cleos)</li>
                    <li><strong>Memoria RAM:</strong> 4 GB m√≠nimo, 8 GB recomendado</li>
                    <li><strong>Almacenamiento:</strong> 10 GB de espacio libre</li>
                    <li><strong>Pantalla:</strong> Resoluci√≥n 1366x768 m√≠nimo</li>
                </ul>

                <h3>Requisitos de Software</h3>
                
                <h4>Servidor</h4>
                <ul>
                    <li><strong>Sistema Operativo:</strong> Ubuntu Server 20.04 LTS o superior</li>
                    <li><strong>Base de Datos:</strong> PostgreSQL 12 o superior</li>
                    <li><strong>Python:</strong> 3.8 o superior</li>
                    <li><strong>Servidor Web:</strong> Nginx (opcional, para monitoreo)</li>
                </ul>

                <h4>Cliente</h4>
                <ul>
                    <li><strong>Sistema Operativo:</strong> Windows 10/11, macOS 10.15+, Ubuntu 20.04+</li>
                    <li><strong>Python:</strong> 3.8 o superior</li>
                    <li><strong>IDE:</strong> Visual Studio Code (recomendado)</li>
                    <li><strong>Git:</strong> Para control de versiones</li>
                </ul>

                <h3>Dependencias de Python</h3>
                
                <h4>Dependencias Principales</h4>
                <div class="code-block">
psycopg2-binary==2.9.10    # Conexi√≥n a PostgreSQL<br>
pandas==2.2.3              # Manipulaci√≥n de datos<br>
requests==2.32.3            # Cliente HTTP para APIs<br>
Pillow==10.0.0             # Procesamiento de im√°genes<br>
tkcalendar==1.6.1          # Selector de fechas
                </div>

                <h4>Dependencias de Desarrollo</h4>
                <div class="code-block">
pytest==8.3.4              # Framework de testing<br>
black==23.0.0              # Formateador de c√≥digo<br>
flake8==6.0.0              # Linter de c√≥digo<br>
mypy==1.5.0                # Verificaci√≥n de tipos
                </div>
            </div>

            <div id="instalacion" class="section">
                <h2>‚öôÔ∏è Instalaci√≥n y Configuraci√≥n</h2>
                
                <h3>Preparaci√≥n del Entorno de Desarrollo</h3>
                
                <h4>Instalaci√≥n de Visual Studio Code</h4>
                <ol>
                    <li><strong>Descargar VS Code:</strong> Visitar [code.visualstudio.com](https://code.visualstudio.com/)</li>
                    <li><strong>Extensiones Recomendadas:</strong>
                        <ul>
                            <li>Python (Microsoft)</li>
                            <li>Python Indent (Kevin Rose)</li>
                            <li>Python Docstring Generator (Nils Werner)</li>
                            <li>GitLens (Eric Amodio)</li>
                            <li>PostgreSQL (Chris Kolkman)</li>
                        </ul>
                    </li>
                    <li><strong>Configuraci√≥n de Python:</strong> Ctrl+Shift+P ‚Üí "Python: Select Interpreter"</li>
                </ol>

                <h4>Instalaci√≥n de Git</h4>
                <div class="code-block">
# Windows: Descargar desde https://git-scm.com/download/win<br>
# macOS: brew install git<br>
# Ubuntu/Debian: sudo apt install git<br><br>
# Configuraci√≥n inicial<br>
git config --global user.name "Tu Nombre"<br>
git config --global user.email "tu.email@ejemplo.com"
                </div>

                <h3>Instalaci√≥n de PostgreSQL</h3>
                
                <h4>Ubuntu/Debian</h4>
                <div class="code-block">
# Actualizar repositorios<br>
sudo apt update<br><br>
# Instalar PostgreSQL<br>
sudo apt install postgresql postgresql-contrib<br><br>
# Verificar instalaci√≥n<br>
sudo systemctl status postgresql<br><br>
# Habilitar inicio autom√°tico<br>
sudo systemctl enable postgresql
                </div>

                <h4>Windows</h4>
                <ol>
                    <li>Descargar desde [postgresql.org/download/windows](https://postgresql.org/download/windows)</li>
                    <li>Ejecutar instalador como administrador</li>
                    <li>Seguir el asistente de instalaci√≥n</li>
                    <li>Anotar la contrase√±a del usuario `postgres`</li>
                </ol>

                <h3>Configuraci√≥n de PostgreSQL</h3>
                
                <h4>Configuraci√≥n de Red</h4>
                <div class="code-block">
# Editar postgresql.conf<br>
sudo nano /etc/postgresql/[version]/main/postgresql.conf<br><br>
# Configurar escucha<br>
listen_addresses = '*'<br>
port = 5432<br><br>
# Editar pg_hba.conf<br>
sudo nano /etc/postgresql/[version]/main/pg_hba.conf<br><br>
# Agregar reglas de acceso<br>
host    all             all             0.0.0.0/0               md5<br>
host    all             all             ::/0                     md5<br><br>
# Reiniciar PostgreSQL<br>
sudo systemctl restart postgresql
                </div>

                <h4>Creaci√≥n de Base de Datos y Usuarios</h4>
                <div class="code-block">
# Acceder como superusuario<br>
sudo -u postgres psql<br><br>
# Crear base de datos<br>
CREATE DATABASE "Siniestros";<br><br>
# Crear usuario Analyst<br>
CREATE USER "Analyst" WITH PASSWORD 'Julio2019**';<br><br>
# Asignar permisos<br>
GRANT CONNECT ON DATABASE "Siniestros" TO "Analyst";<br>
GRANT USAGE ON SCHEMA public TO "Analyst";<br>
GRANT SELECT, INSERT, UPDATE, DELETE ON ALL TABLES IN SCHEMA public TO "Analyst";<br>
GRANT USAGE, SELECT ON ALL SEQUENCES IN SCHEMA public TO "Analyst";<br><br>
# Salir<br>
\q
                </div>

                <h3>Script de Creaci√≥n de Tablas</h3>
                
                <h4>Ejecutar Script</h4>
                <div class="code-block">
# Conectar a PostgreSQL y ejecutar el script<br>
sudo -u postgres psql -f docs/scripts/create_tables.sql<br><br>
# O desde psql<br>
sudo -u postgres psql<br>
\i docs/scripts/create_tables.sql
                </div>

                <div class="success">
                    <h4>‚úÖ Script Incluye</h4>
                    <ul>
                        <li>Creaci√≥n de todas las tablas del sistema</li>
                        <li>Primary Keys en columnas ObjectID</li>
                        <li>√çndices optimizados para rendimiento</li>
                        <li>Constraints de validaci√≥n</li>
                        <li>Vistas para consultas frecuentes</li>
                        <li>Funciones de mantenimiento</li>
                        <li>Triggers para integridad de datos</li>
                        <li>Configuraci√≥n del usuario Analyst</li>
                    </ul>
                </div>
            </div>

            <div id="desarrollo" class="section">
                <h2>üîß Entorno de Desarrollo</h2>
                
                <h3>Configuraci√≥n del Proyecto</h3>
                
                <h4>Clonaci√≥n del Repositorio</h4>
                <div class="code-block">
# Clonar el repositorio<br>
git clone https://github.com/tu-usuario/qtrazer.git<br>
cd qtrazer<br><br>
# Crear rama de desarrollo<br>
git checkout -b develop
                </div>

                <h4>Configuraci√≥n del Entorno Virtual</h4>
                <div class="code-block">
# Crear entorno virtual<br>
python -m venv venv<br><br>
# Activar entorno virtual<br>
# Windows<br>
venv\Scripts\activate<br><br>
# macOS/Linux<br>
source venv/bin/activate<br><br>
# Instalar dependencias<br>
pip install -r requirements.txt
                </div>

                <h3>Configuraci√≥n de la Base de Datos</h3>
                
                <h4>Archivo de Configuraci√≥n</h4>
                <p>Editar <code>src/config/settings.py</code>:</p>
                <div class="code-block">
# Configuraci√≥n de la base de datos<br>
PARAMETROS_BD = {<br>
    'dbname': 'Siniestros',<br>
    'user': 'Analyst',<br>
    'password': 'Julio2019**',<br>
    'host': '10.14.15.35',  # IP del servidor PostgreSQL<br>
    'port': '5432'<br>
}
                </div>

                <h4>Verificar Conectividad</h4>
                <div class="code-block">
# Probar conexi√≥n<br>
python -c "<br>
import psycopg2<br>
from src.config.settings import PARAMETROS_BD<br>
conn = psycopg2.connect(**PARAMETROS_BD)<br>
print('Conexi√≥n exitosa')<br>
conn.close()<br>
"
                </div>

                <h3>Configuraci√≥n de VS Code</h3>
                
                <h4>Archivo de Debugging</h4>
                <p>Crear archivo <code>.vscode/launch.json</code>:</p>
                <div class="code-block">
{<br>
    "version": "0.2.0",<br>
    "configurations": [<br>
        {<br>
            "name": "Python: Qtrazer",<br>
            "type": "python",<br>
            "request": "launch",<br>
            "program": "${workspaceFolder}/src/main.py",<br>
            "console": "integratedTerminal",<br>
            "cwd": "${workspaceFolder}",<br>
            "env": {<br>
                "PYTHONPATH": "${workspaceFolder}"<br>
            }<br>
        }<br>
    ]<br>
}
                </div>

                <h3>Ejecuci√≥n del Sistema</h3>
                
                <h4>Modo Desarrollo</h4>
                <div class="code-block">
# Activar entorno virtual<br>
source venv/bin/activate  # Linux/macOS<br>
# o<br>
venv\Scripts\activate     # Windows<br><br>
# Ejecutar aplicaci√≥n<br>
python src/main.py
                </div>

                <h4>Modo Producci√≥n</h4>
                <div class="code-block">
# Crear ejecutable con PyInstaller<br>
pip install pyinstaller<br>
pyinstaller --onefile --windowed --icon=assets/Simbolo_Qtrazer.ico src/main.py<br><br>
# El ejecutable se crear√° en dist/main.exe
                </div>

                <h3>Testing y Calidad de C√≥digo</h3>
                
                <h4>Instalar Dependencias de Testing</h4>
                <div class="code-block">
pip install pytest pytest-cov black flake8 mypy
                </div>

                <h4>Ejecutar Tests</h4>
                <div class="code-block">
# Ejecutar todos los tests<br>
pytest<br><br>
# Con cobertura<br>
pytest --cov=src<br><br>
# Tests espec√≠ficos<br>
pytest tests/test_database.py
                </div>

                <h4>Linting y Formateo</h4>
                <div class="code-block">
# Formatear c√≥digo<br>
black src/<br><br>
# Verificar estilo<br>
flake8 src/<br><br>
# Verificar tipos<br>
mypy src/
                </div>
            </div>

            <div id="problemas" class="section">
                <h2>üîß Soluci√≥n de Problemas</h2>
                
                <h3>Problemas de Conexi√≥n a Base de Datos</h3>
                
                <h4>Error: "Fall√≥ la conexi√≥n a la base de datos"</h4>
                <div class="error">
                    <strong>S√≠ntomas:</strong> Mensaje de error al intentar conectar<br>
                    <strong>Causas Posibles:</strong>
                    <ul>
                        <li>Servidor PostgreSQL no est√° ejecut√°ndose</li>
                        <li>Credenciales incorrectas</li>
                        <li>Firewall bloqueando conexi√≥n</li>
                        <li>Puerto incorrecto</li>
                    </ul>
                    <strong>Soluciones:</strong>
                </div>
                <div class="code-block">
# Verificar estado del servicio<br>
sudo systemctl status postgresql<br><br>
# Verificar conectividad de red<br>
ping 10.14.15.35<br>
telnet 10.14.15.35 5432<br><br>
# Verificar configuraci√≥n de red en PostgreSQL<br>
sudo nano /etc/postgresql/*/main/postgresql.conf<br>
sudo nano /etc/postgresql/*/main/pg_hba.conf<br><br>
# Reiniciar PostgreSQL<br>
sudo systemctl restart postgresql
                </div>

                <h4>Error: "Permission denied"</h4>
                <div class="error">
                    <strong>S√≠ntomas:</strong> Acceso denegado al intentar conectar<br>
                    <strong>Causas Posibles:</strong>
                    <ul>
                        <li>Usuario sin permisos suficientes</li>
                        <li>Configuraci√≥n incorrecta de pg_hba.conf</li>
                    </ul>
                </div>
                <div class="code-block">
-- Verificar permisos del usuario<br>
\du "Analyst"<br><br>
-- Asignar permisos si es necesario<br>
GRANT ALL PRIVILEGES ON DATABASE "Siniestros" TO "Analyst";<br>
GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO "Analyst";
                </div>

                <h3>Problemas de Rendimiento</h3>
                
                <h4>Consultas Lentas</h4>
                <div class="warning">
                    <strong>S√≠ntomas:</strong> Respuesta lenta en consultas de datos<br>
                    <strong>Causas Posibles:</strong>
                    <ul>
                        <li>Falta de √≠ndices</li>
                        <li>Consultas no optimizadas</li>
                        <li>Recursos insuficientes del servidor</li>
                    </ul>
                </div>
                <div class="code-block">
-- Analizar consultas lentas<br>
EXPLAIN ANALYZE SELECT * FROM accidente WHERE fecha_ocurrencia_acc BETWEEN '2024-01-01' AND '2024-12-31';<br><br>
-- Crear √≠ndices adicionales si es necesario<br>
CREATE INDEX idx_accidente_fecha_hora ON accidente(fecha_ocurrencia_acc, hora_ocurrencia_acc);<br>
CREATE INDEX idx_accidente_localidad_fecha ON accidente(localidad, fecha_ocurrencia_acc);<br><br>
-- Analizar y actualizar estad√≠sticas<br>
ANALYZE accidente;<br>
ANALYZE vm_acc_actor_vial;<br>
ANALYZE vm_acc_causa;<br>
ANALYZE vm_acc_vehiculo;<br>
ANALYZE vm_acc_vial;
                </div>

                <h3>Problemas de Dependencias</h3>
                
                <h4>Error: "Module not found"</h4>
                <div class="warning">
                    <strong>S√≠ntomas:</strong> M√≥dulos de Python no encontrados<br>
                    <strong>Causas Posibles:</strong>
                    <ul>
                        <li>Entorno virtual no activado</li>
                        <li>Dependencias no instaladas</li>
                        <li>Versiones incompatibles</li>
                    </ul>
                </div>
                <div class="code-block">
# Verificar entorno virtual<br>
which python<br>
pip list<br><br>
# Reinstalar dependencias<br>
pip uninstall -r requirements.txt -y<br>
pip install -r requirements.txt<br><br>
# Verificar versiones<br>
python -c "import psycopg2; print(psycopg2.__version__)"<br>
python -c "import pandas; print(pandas.__version__)"
                </div>

                <h3>Logs y Diagn√≥stico</h3>
                
                <h4>Habilitar Logs Detallados</h4>
                <div class="code-block">
# En src/config/settings.py<br>
import logging<br><br>
# Configuraci√≥n de logging<br>
logging.basicConfig(<br>
    level=logging.DEBUG,<br>
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',<br>
    handlers=[<br>
        logging.FileHandler('qtrazer.log'),<br>
        logging.StreamHandler()<br>
    ]<br>
)<br><br>
# En cada m√≥dulo<br>
logger = logging.getLogger(__name__)<br>
logger.debug("Mensaje de debug")<br>
logger.info("Mensaje informativo")<br>
logger.error("Mensaje de error")
                </div>

                <h4>Monitoreo de Recursos</h4>
                <div class="code-block">
# Monitorear uso de CPU y memoria<br>
htop<br>
top<br><br>
# Monitorear uso de disco<br>
df -h<br>
du -sh /var/lib/postgresql/*<br><br>
# Monitorear logs de PostgreSQL<br>
sudo tail -f /var/log/postgresql/postgresql-*.log
                </div>

                <h3>Backup y Recuperaci√≥n</h3>
                
                <h4>Script de Backup Autom√°tico</h4>
                <div class="success">
                    <h4>üìÅ Ubicaci√≥n: <code>docs/scripts/backup_database.sh</code></h4>
                    <p>El script incluye:</p>
                    <ul>
                        <li>Backup completo de PostgreSQL</li>
                        <li>Compresi√≥n autom√°tica con gzip</li>
                        <li>Limpieza autom√°tica de backups antiguos</li>
                        <li>Verificaci√≥n de integridad del backup</li>
                        <li>Generaci√≥n de reportes detallados</li>
                        <li>Sistema de logging con colores</li>
                        <li>Manejo de errores robusto</li>
                        <li>Opciones de l√≠nea de comandos flexibles</li>
                    </ul>
                </div>

                <h4>Configurar Cron para Backups Autom√°ticos</h4>
                <div class="code-block">
# Editar crontab<br>
crontab -e<br><br>
# Backup diario a las 2:00 AM<br>
0 2 * * * /bin/bash /path/to/qtrazer/docs/scripts/backup_database.sh<br><br>
# Backup semanal los domingos a las 3:00 AM<br>
0 3 * * 0 /bin/bash /path/to/qtrazer/docs/scripts/backup_database.sh --retention 30
                </div>

                <h4>Ejecutar Backup Manualmente</h4>
                <div class="code-block">
# Backup completo<br>
./docs/scripts/backup_database.sh<br><br>
# Solo limpieza<br>
./docs/scripts/backup_database.sh --cleanup<br><br>
# Cambiar retenci√≥n<br>
./docs/scripts/backup_database.sh --retention 14
                </div>
            </div>

            <div class="section">
                <h2>üìö Recursos Adicionales</h2>
                
                <h3>Documentaci√≥n Disponible</h3>
                <ul>
                    <li><strong><a href="manual_usuario.html">Manual de Usuario</a>:</strong> Gu√≠a completa para usuarios finales</li>
                    <li><strong><a href="manual_tecnico.md">Manual T√©cnico (Markdown)</a>:</strong> Versi√≥n completa en formato Markdown</li>
                    <li><strong><a href="scripts/">Scripts de Base de Datos</a>:</strong> Scripts SQL y de mantenimiento</li>
                    <li><strong><a href="../README.md">README del Proyecto</a>:</strong> Documentaci√≥n general del proyecto</li>
                </ul>

                <h3>Comandos √ötiles de PostgreSQL</h3>
                <div class="code-block">
-- Verificar estado de conexiones<br>
SELECT * FROM pg_stat_activity;<br><br>
-- Verificar tama√±o de tablas<br>
SELECT schemaname, tablename, pg_size_pretty(pg_total_relation_size(schemaname||'.'||tablename)) AS size<br>
FROM pg_tables<br>
WHERE schemaname = 'public'<br>
ORDER BY pg_total_relation_size(schemaname||'.'||tablename) DESC;<br><br>
-- Verificar √≠ndices<br>
SELECT tablename, indexname, indexdef<br>
FROM pg_indexes<br>
WHERE schemaname = 'public'<br>
ORDER BY tablename, indexname;<br><br>
-- Verificar permisos de usuario<br>
\du "Analyst"
                </div>

                <h3>Scripts de Mantenimiento</h3>
                <div class="code-block">
# Limpieza de logs antiguos<br>
find /var/log -name "*.log" -mtime +30 -delete<br><br>
# Optimizaci√≥n de base de datos<br>
sudo -u postgres psql -d "Siniestros" -c "VACUUM ANALYZE;"<br><br>
# Verificaci√≥n de espacio en disco<br>
df -h | grep -E 'Use%|/dev/'
                </div>
            </div>

            <div class="section">
                <h2>üéØ Conclusi√≥n</h2>
                <p>El manual t√©cnico del sistema Qtrazer proporciona toda la informaci√≥n necesaria para que los desarrolladores puedan instalar, configurar, desarrollar y mantener el sistema de manera efectiva.</p>
                
                <p>Para obtener el m√°ximo provecho del sistema:</p>
                <ol>
                    <li><strong>Siga la arquitectura MVC</strong> establecida para mantener la separaci√≥n de responsabilidades</li>
                    <li><strong>Utilice el entorno virtual</strong> para gestionar dependencias de manera aislada</li>
                    <li><strong>Configure correctamente PostgreSQL</strong> con los usuarios y permisos adecuados</li>
                    <li><strong>Ejecute los scripts de creaci√≥n</strong> para configurar la base de datos</li>
                    <li><strong>Implemente backups autom√°ticos</strong> para proteger los datos</li>
                    <li><strong>Utilice las herramientas de testing</strong> para mantener la calidad del c√≥digo</li>
                    <li><strong>Consulte la documentaci√≥n</strong> para funcionalidades avanzadas</li>
                </ol>

                <div class="success">
                    <h4>üöÄ Pr√≥ximos Pasos</h4>
                    <ul>
                        <li>Configurar el entorno de desarrollo con VS Code</li>
                        <li>Instalar PostgreSQL y crear la base de datos</li>
                        <li>Ejecutar los scripts de configuraci√≥n</li>
                        <li>Probar la conectividad y funcionalidades b√°sicas</li>
                        <li>Implementar nuevas funcionalidades siguiendo la arquitectura establecida</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="footer">
            <p><strong>Manual T√©cnico - Sistema Qtrazer v1.0</strong></p>
            <p>√öltima actualizaci√≥n: Enero 2025</p>
            <p>Desarrollado para la consulta de datos de siniestros viales en Bogot√°</p>
        </div>
    </div>
</body>
</html>
